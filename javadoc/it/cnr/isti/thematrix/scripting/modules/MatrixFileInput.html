<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_67) on Mon Sep 01 14:10:28 CEST 2014 -->
<title>MatrixFileInput</title>
<meta name="date" content="2014-09-01">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="MatrixFileInput";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MatrixFileInput.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../it/cnr/isti/thematrix/scripting/modules/MatrixExtendData.html" title="class in it.cnr.isti.thematrix.scripting.modules"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../it/cnr/isti/thematrix/scripting/modules/MatrixFileOutput.html" title="class in it.cnr.isti.thematrix.scripting.modules"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?it/cnr/isti/thematrix/scripting/modules/MatrixFileInput.html" target="_top">Frames</a></li>
<li><a href="MatrixFileInput.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_classes_inherited_from_class_java.util.AbstractMap">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">it.cnr.isti.thematrix.scripting.modules</div>
<h2 title="Class MatrixFileInput" class="title">Class MatrixFileInput</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>java.util.AbstractMap&lt;K,V&gt;</li>
<li>
<ul class="inheritance">
<li>java.util.HashMap&lt;java.lang.String,<a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/Symbol.html" title="class in it.cnr.isti.thematrix.scripting.sys">Symbol</a>&lt;?&gt;&gt;</li>
<li>
<ul class="inheritance">
<li><a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/SymbolTable.html" title="class in it.cnr.isti.thematrix.scripting.sys">it.cnr.isti.thematrix.scripting.sys.SymbolTable</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/DatasetRecord.html" title="class in it.cnr.isti.thematrix.scripting.sys">it.cnr.isti.thematrix.scripting.sys.DatasetRecord</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html" title="class in it.cnr.isti.thematrix.scripting.sys">it.cnr.isti.thematrix.scripting.sys.MatrixModule</a></li>
<li>
<ul class="inheritance">
<li>it.cnr.isti.thematrix.scripting.modules.MatrixFileInput</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.io.Serializable, java.lang.Cloneable, java.util.Map&lt;java.lang.String,<a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/Symbol.html" title="class in it.cnr.isti.thematrix.scripting.sys">Symbol</a>&lt;?&gt;&gt;</dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">MatrixFileInput</span>
extends <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html" title="class in it.cnr.isti.thematrix.scripting.sys">MatrixModule</a></pre>
<div class="block">Class implementing the FileInputModule, which allows to read in IAD CSV files with assigned schema. <br>
 This class relies on many classes developed when extending Jerboa into TheMatrix; the corresponding initialization
 code must be called before we call the interpreter.
 
 A constructor exists that specifies the input file is a temporary one, so no connection is allowed to the DBMS,
 functions skip most of the related checks and initializations, and module will not report bogus errors. <br>
 
 TODO hooked-in code to interact with the DBMS when a file is not found in the IAD directory, exploiting the code in
 the MappingManager, Mapper and related classes. This will need some refinement and more error checking. If we cannot
 download a file immediately (query generation) we should not allow the script to continue (exception is raised) but
 we should make sure that ALL needed queries are generated. This is currently not true, we only generate the first one
 we meet. Possible solution: encode a dev/null-like CSVFile that can be returned instead, returns a few empty rows
 then closes. <br>
 
 TODO workaround added for the file name, to address a small design issue of the syntax conversion; nothing that is
 not a CSV file should get there, and the low-level name of the file should not in generally be fixed by the script. <br>
 
 FIXME note that the most general constructors could have the last parameter as a hook to call if the file is not
 found: to create it from the DB, or to pull the hasMore()/next calls of the writer of a temporary file (could it also
 improve the SortModule ?). UNLIKELY Carefully consider when switching from disk based to memory based buffering.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>edoardovacchi, massimo</dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../serialized-form.html#it.cnr.isti.thematrix.scripting.modules.MatrixFileInput">Serialized Form</a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="nested_classes_inherited_from_class_java.util.AbstractMap">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;java.util.AbstractMap</h3>
<code>java.util.AbstractMap.SimpleEntry&lt;K,V&gt;, java.util.AbstractMap.SimpleImmutableEntry&lt;K,V&gt;</code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../../it/cnr/isti/thematrix/scripting/modules/MatrixFileInput.html#baseName">baseName</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../it/cnr/isti/thematrix/common/Enums.CompressionType.html" title="enum in it.cnr.isti.thematrix.common">Enums.CompressionType</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../it/cnr/isti/thematrix/scripting/modules/MatrixFileInput.html#compression">compression</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../it/cnr/isti/thematrix/scripting/modules/MatrixFileInput.html#fileIsTemporary">fileIsTemporary</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../it/cnr/isti/thematrix/mapping/utils/CSVFile.html" title="class in it.cnr.isti.thematrix.mapping.utils">CSVFile</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../it/cnr/isti/thematrix/scripting/modules/MatrixFileInput.html#inputCSV">inputCSV</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../../it/cnr/isti/thematrix/scripting/modules/MatrixFileInput.html#inputFilename">inputFilename</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/DatasetSchema.html" title="class in it.cnr.isti.thematrix.scripting.sys">DatasetSchema</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../it/cnr/isti/thematrix/scripting/modules/MatrixFileInput.html#inputSchema">inputSchema</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.List&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../it/cnr/isti/thematrix/scripting/modules/MatrixFileInput.html#orderByList">orderByList</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../it/cnr/isti/thematrix/scripting/modules/MatrixFileInput.html#serialVersionUID">serialVersionUID</a></strong></code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_it.cnr.isti.thematrix.scripting.sys.MatrixModule">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;it.cnr.isti.thematrix.scripting.sys.<a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html" title="class in it.cnr.isti.thematrix.scripting.sys">MatrixModule</a></h3>
<code><a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html#name">name</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../it/cnr/isti/thematrix/scripting/modules/MatrixFileInput.html#MatrixFileInput(java.lang.String,%20java.lang.String,%20it.cnr.isti.thematrix.scripting.sys.DatasetSchema,%20java.util.List)">MatrixFileInput</a></strong>(java.lang.String&nbsp;name,
               java.lang.String&nbsp;inputFilename,
               <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/DatasetSchema.html" title="class in it.cnr.isti.thematrix.scripting.sys">DatasetSchema</a>&nbsp;inputSchema,
               java.util.List&lt;java.lang.String&gt;&nbsp;orderByList)</code>
<div class="block">Constructor taking a DatasetSchema object instead of a schema name.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../../../it/cnr/isti/thematrix/scripting/modules/MatrixFileInput.html#MatrixFileInput(java.lang.String,%20java.lang.String,%20it.cnr.isti.thematrix.scripting.sys.DatasetSchema,%20java.util.List,%20boolean)">MatrixFileInput</a></strong>(java.lang.String&nbsp;name,
               java.lang.String&nbsp;inputFilename,
               <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/DatasetSchema.html" title="class in it.cnr.isti.thematrix.scripting.sys">DatasetSchema</a>&nbsp;inputSchema,
               java.util.List&lt;java.lang.String&gt;&nbsp;orderByList,
               boolean&nbsp;flag)</code>
<div class="block">Most general constructor, that also allows to define the input file as a temporary one.</div>
</td>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../it/cnr/isti/thematrix/scripting/modules/MatrixFileInput.html#MatrixFileInput(java.lang.String,%20java.lang.String,%20java.lang.String,%20java.util.List)">MatrixFileInput</a></strong>(java.lang.String&nbsp;name,
               java.lang.String&nbsp;inputFilename,
               java.lang.String&nbsp;inputSchema,
               java.util.List&lt;java.lang.String&gt;&nbsp;orderByList)</code>
<div class="block">Constructor (chained to the most general one) which accepts a schema name.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../it/cnr/isti/thematrix/scripting/modules/MatrixFileInput.html#exec()">exec</a></strong>()</code>
<div class="block">this method has no longer a real purpose.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../../it/cnr/isti/thematrix/scripting/modules/MatrixFileInput.html#fileThatCanBeStolen()">fileThatCanBeStolen</a></strong>()</code>
<div class="block">This is a Hack used for graph postprocessing.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../it/cnr/isti/thematrix/scripting/modules/MatrixFileInput.html#hasMore()">hasMore</a></strong>()</code>
<div class="block">Check if there are more data, and as a side effect, open the file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../it/cnr/isti/thematrix/scripting/modules/MatrixFileInput.html#next()">next</a></strong>()</code>
<div class="block">Get next row and parse its fields into Symbol values.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../it/cnr/isti/thematrix/scripting/modules/MatrixFileInput.html#openFile()">openFile</a></strong>()</code>
<div class="block">Perform all actions to open a CSV file and allow reading from it via standard Module methods.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../it/cnr/isti/thematrix/scripting/modules/MatrixFileInput.html#openFileDownloadFromDB(it.cnr.isti.thematrix.mapping.MappingManager)">openFileDownloadFromDB</a></strong>(<a href="../../../../../../it/cnr/isti/thematrix/mapping/MappingManager.html" title="class in it.cnr.isti.thematrix.mapping">MappingManager</a>&nbsp;fileMapper)</code>
<div class="block">Download CSV data from the DBMS in case a valid CSV file is not found but we have a DB mapping for that
 filename.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../it/cnr/isti/thematrix/scripting/modules/MatrixFileInput.html#reset()">reset</a></strong>()</code>
<div class="block">The FileInput module does not support rewinding the file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../it/cnr/isti/thematrix/scripting/modules/MatrixFileInput.html#setup()">setup</a></strong>()</code>
<div class="block">This method is invoked <strong> once </strong> by the interpreter, after the constructor, 
 during the analysis of the input script.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../../it/cnr/isti/thematrix/scripting/modules/MatrixFileInput.html#toString()">toString</a></strong>()</code>
<div class="block">Debugging method, returns basic info about the module.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_it.cnr.isti.thematrix.scripting.sys.MatrixModule">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;it.cnr.isti.thematrix.scripting.sys.<a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html" title="class in it.cnr.isti.thematrix.scripting.sys">MatrixModule</a></h3>
<code><a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html#addConsumer(it.cnr.isti.thematrix.scripting.sys.MatrixModule)">addConsumer</a>, <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html#changeInput(it.cnr.isti.thematrix.scripting.sys.MatrixModule)">changeInput</a>, <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html#get(java.lang.Object)">get</a>, <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html#getConsumers()">getConsumers</a>, <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html#getLogicalConsumers()">getLogicalConsumers</a>, <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html#getReferenceCount()">getReferenceCount</a>, <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html#hasOneInput()">hasOneInput</a>, <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html#schemaMatches(java.lang.String)">schemaMatches</a>, <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html#setLogicalConsumer(it.cnr.isti.thematrix.scripting.sys.MatrixModule)">setLogicalConsumer</a>, <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html#setLogicalConsumers(java.util.List)">setLogicalConsumers</a>, <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html#substituteInput(it.cnr.isti.thematrix.scripting.sys.MatrixModule,%20it.cnr.isti.thematrix.scripting.sys.MatrixModule)">substituteInput</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_it.cnr.isti.thematrix.scripting.sys.DatasetRecord">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;it.cnr.isti.thematrix.scripting.sys.<a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/DatasetRecord.html" title="class in it.cnr.isti.thematrix.scripting.sys">DatasetRecord</a></h3>
<code><a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/DatasetRecord.html#attributes()">attributes</a>, <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/DatasetRecord.html#clear()">clear</a>, <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/DatasetRecord.html#deepCopy()">deepCopy</a>, <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/DatasetRecord.html#emptyRecord(it.cnr.isti.thematrix.scripting.sys.DatasetRecord)">emptyRecord</a>, <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/DatasetRecord.html#getSchema()">getSchema</a>, <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/DatasetRecord.html#isSchemaEmpty()">isSchemaEmpty</a>, <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/DatasetRecord.html#linkTo(java.util.List)">linkTo</a>, <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/DatasetRecord.html#put(java.lang.String,%20it.cnr.isti.thematrix.scripting.sys.Symbol)">put</a>, <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/DatasetRecord.html#setAll(it.cnr.isti.thematrix.scripting.sys.DatasetRecord)">setAll</a>, <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/DatasetRecord.html#setSchema(it.cnr.isti.thematrix.scripting.sys.DatasetSchema)">setSchema</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_it.cnr.isti.thematrix.scripting.sys.SymbolTable">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;it.cnr.isti.thematrix.scripting.sys.<a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/SymbolTable.html" title="class in it.cnr.isti.thematrix.scripting.sys">SymbolTable</a></h3>
<code><a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/SymbolTable.html#isCompatible(java.lang.String,%20java.lang.String)">isCompatible</a>, <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/SymbolTable.html#putAll(java.util.Collection)">putAll</a>, <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/SymbolTable.html#set(java.lang.String,%20T)">set</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.util.HashMap">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.util.HashMap</h3>
<code>clone, containsKey, containsValue, entrySet, isEmpty, keySet, putAll, remove, size, values</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.util.AbstractMap">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.util.AbstractMap</h3>
<code>equals, hashCode</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>finalize, getClass, notify, notifyAll, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.util.Map">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;java.util.Map</h3>
<code>equals, hashCode</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="serialVersionUID">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>serialVersionUID</h4>
<pre>private static final&nbsp;long serialVersionUID</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#it.cnr.isti.thematrix.scripting.modules.MatrixFileInput.serialVersionUID">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="inputFilename">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>inputFilename</h4>
<pre>private final&nbsp;java.lang.String inputFilename</pre>
</li>
</ul>
<a name="baseName">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>baseName</h4>
<pre>private final&nbsp;java.lang.String baseName</pre>
</li>
</ul>
<a name="inputSchema">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>inputSchema</h4>
<pre>private final&nbsp;<a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/DatasetSchema.html" title="class in it.cnr.isti.thematrix.scripting.sys">DatasetSchema</a> inputSchema</pre>
</li>
</ul>
<a name="inputCSV">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>inputCSV</h4>
<pre>private&nbsp;<a href="../../../../../../it/cnr/isti/thematrix/mapping/utils/CSVFile.html" title="class in it.cnr.isti.thematrix.mapping.utils">CSVFile</a> inputCSV</pre>
</li>
</ul>
<a name="fileIsTemporary">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fileIsTemporary</h4>
<pre>private&nbsp;boolean fileIsTemporary</pre>
</li>
</ul>
<a name="compression">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compression</h4>
<pre>private&nbsp;<a href="../../../../../../it/cnr/isti/thematrix/common/Enums.CompressionType.html" title="enum in it.cnr.isti.thematrix.common">Enums.CompressionType</a> compression</pre>
</li>
</ul>
<a name="orderByList">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>orderByList</h4>
<pre>private final&nbsp;java.util.List&lt;java.lang.String&gt; orderByList</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="MatrixFileInput(java.lang.String, java.lang.String, java.lang.String, java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MatrixFileInput</h4>
<pre>public&nbsp;MatrixFileInput(java.lang.String&nbsp;name,
               java.lang.String&nbsp;inputFilename,
               java.lang.String&nbsp;inputSchema,
               java.util.List&lt;java.lang.String&gt;&nbsp;orderByList)</pre>
<div class="block">Constructor (chained to the most general one) which accepts a schema name.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>name</code> - name of module</dd><dd><code>inputFilename</code> - name of the file to read</dd><dd><code>inputSchema</code> - name of the input schema</dd><dd><code>orderByList</code> - list of fields (redundant?)</dd></dl>
</li>
</ul>
<a name="MatrixFileInput(java.lang.String, java.lang.String, it.cnr.isti.thematrix.scripting.sys.DatasetSchema, java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MatrixFileInput</h4>
<pre>public&nbsp;MatrixFileInput(java.lang.String&nbsp;name,
               java.lang.String&nbsp;inputFilename,
               <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/DatasetSchema.html" title="class in it.cnr.isti.thematrix.scripting.sys">DatasetSchema</a>&nbsp;inputSchema,
               java.util.List&lt;java.lang.String&gt;&nbsp;orderByList)</pre>
<div class="block">Constructor taking a DatasetSchema object instead of a schema name.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>name</code> - name of module</dd><dd><code>inputFilename</code> - name of the file to read</dd><dd><code>inputSchema</code> - the input schema to be used for reading</dd><dd><code>orderByList</code> - list of fields (redundant?)</dd></dl>
</li>
</ul>
<a name="MatrixFileInput(java.lang.String, java.lang.String, it.cnr.isti.thematrix.scripting.sys.DatasetSchema, java.util.List, boolean)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MatrixFileInput</h4>
<pre>public&nbsp;MatrixFileInput(java.lang.String&nbsp;name,
               java.lang.String&nbsp;inputFilename,
               <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/DatasetSchema.html" title="class in it.cnr.isti.thematrix.scripting.sys">DatasetSchema</a>&nbsp;inputSchema,
               java.util.List&lt;java.lang.String&gt;&nbsp;orderByList,
               boolean&nbsp;flag)</pre>
<div class="block">Most general constructor, that also allows to define the input file as a temporary one.
 
 This constructor allows to specify the input as a temporary file: i.e. a file
 that is not possible to download from DBMS, and is allowed not to exist yet at module creation time.
 
 
 TODO check the RuntimeException, maybe use a subclass</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>name</code> - name of module</dd><dd><code>inputFilename</code> - name of the file to read</dd><dd><code>inputSchema</code> - the input schema to be used for reading</dd><dd><code>orderByList</code> - list of fields (redundant?)</dd><dd><code>flag</code> - if true, the input file is a temporary.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="fileThatCanBeStolen()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fileThatCanBeStolen</h4>
<pre>public&nbsp;java.lang.String&nbsp;fileThatCanBeStolen()</pre>
<div class="block">This is a Hack used for graph postprocessing. Returns the filename if it is a plain CSV file that the FileSorter
 routines (called by MatrixSort) can read, and if the file exists already. If the file is not plain, returns the Empty string. 
 
 TODO Does not bother to check if the file is temporary or not, possibly unsafe?
 
 TODO when we rewrite the access to CSV files in the sorting routine, the compression layer should be below it,
 and we can modify this routine to a simple filename getter method.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the filename, if it can be stolen, empty string otherwise.</dd></dl>
</li>
</ul>
<a name="setup()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setup</h4>
<pre>public&nbsp;void&nbsp;setup()</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html#setup()">MatrixModule</a></code></strong></div>
<div class="block">This method is invoked <strong> once </strong> by the interpreter, after the constructor, 
 during the analysis of the input script.
 
 The purpose of this method is to setup the internal state of the module, so that the following
 modules in the script can safely access this module's data
 
 In this method, the programmer <strong>must</strong> invoke 
 <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/DatasetRecord.html#setSchema(it.cnr.isti.thematrix.scripting.sys.DatasetSchema)"><code>DatasetRecord.setSchema(DatasetSchema)</code></a> with a proper <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/DatasetSchema.html" title="class in it.cnr.isti.thematrix.scripting.sys"><code>DatasetSchema</code></a> instance
 and any other internal state variables must be initialized to sane defaults.
 
 If this module has inputs, it is also supposed to invoke <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html#addConsumer(it.cnr.isti.thematrix.scripting.sys.MatrixModule)"><code>MatrixModule.addConsumer(MatrixModule)</code></a>
 for each input module instance.
 
 Subclasses may implement this method in such a way that it may be re-invoked by 
 <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html#changeInput(it.cnr.isti.thematrix.scripting.sys.MatrixModule)"><code>MatrixModule.changeInput(MatrixModule)</code></a> or <a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html#substituteInput(it.cnr.isti.thematrix.scripting.sys.MatrixModule,%20it.cnr.isti.thematrix.scripting.sys.MatrixModule)"><code>MatrixModule.substituteInput(MatrixModule, MatrixModule)</code></a>
 to re-setup the internal state of the module.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html#setup()">setup</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html" title="class in it.cnr.isti.thematrix.scripting.sys">MatrixModule</a></code></dd>
</dl>
</li>
</ul>
<a name="openFile()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openFile</h4>
<pre>private&nbsp;void&nbsp;openFile()</pre>
<div class="block">Perform all actions to open a CSV file and allow reading from it via standard Module methods. Possibly download
 the data from DB or create a query for manual execution. The new openFile reacts to the instance variable
 fileIsTemporary; if it is true, then no DB download will be attempted. Performs check if the files is temporary
 and, if it's true, skip the check if file exist.
 
 If the file is temporary, now it must exists and we check its compression type is the one we expected; if the
 file can be mapped via MappingManager and/or downloaded from DB, we will adapt to the compression type we find on
 disk.</div>
</li>
</ul>
<a name="openFileDownloadFromDB(it.cnr.isti.thematrix.mapping.MappingManager)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openFileDownloadFromDB</h4>
<pre>private&nbsp;boolean&nbsp;openFileDownloadFromDB(<a href="../../../../../../it/cnr/isti/thematrix/mapping/MappingManager.html" title="class in it.cnr.isti.thematrix.mapping">MappingManager</a>&nbsp;fileMapper)</pre>
<div class="block">Download CSV data from the DBMS in case a valid CSV file is not found but we have a DB mapping for that
 filename. 
 
 TODO Maybe a file that is not downloadable should not reach here at all.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>fileMapper</code> - class providing mapping information for DM-downloadable files</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if the file was successfully downloaded.</dd></dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;java.lang.String&nbsp;toString()</pre>
<div class="block">Debugging method, returns basic info about the module.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html#toString()">toString</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html" title="class in it.cnr.isti.thematrix.scripting.sys">MatrixModule</a></code></dd>
</dl>
</li>
</ul>
<a name="reset()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reset</h4>
<pre>public&nbsp;void&nbsp;reset()</pre>
<div class="block">The FileInput module does not support rewinding the file.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html#reset()">reset</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html" title="class in it.cnr.isti.thematrix.scripting.sys">MatrixModule</a></code></dd>
</dl>
</li>
</ul>
<a name="exec()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>exec</h4>
<pre>public&nbsp;void&nbsp;exec()</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html#exec()">MatrixModule</a></code></strong></div>
<div class="block">this method has no longer a real purpose. It is invoked by the interpreter when <strong>all</strong> 
 of the input script has been processed, for all modules in the script, in sequence.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html#exec()">exec</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html" title="class in it.cnr.isti.thematrix.scripting.sys">MatrixModule</a></code></dd>
</dl>
</li>
</ul>
<a name="hasMore()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasMore</h4>
<pre>public&nbsp;boolean&nbsp;hasMore()</pre>
<div class="block">Check if there are more data, and as a side effect, open the file.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html#hasMore()">hasMore</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html" title="class in it.cnr.isti.thematrix.scripting.sys">MatrixModule</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>true until the dataset has reached its last record</dd></dl>
</li>
</ul>
<a name="next()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>next</h4>
<pre>public&nbsp;void&nbsp;next()</pre>
<div class="block">Get next row and parse its fields into Symbol values. Should some way support caching a set of rows.
 
 FIXME Actual parsing of the data fields should be in a different class and not inside here.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html#next()">next</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../it/cnr/isti/thematrix/scripting/sys/MatrixModule.html" title="class in it.cnr.isti.thematrix.scripting.sys">MatrixModule</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MatrixFileInput.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../it/cnr/isti/thematrix/scripting/modules/MatrixExtendData.html" title="class in it.cnr.isti.thematrix.scripting.modules"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../it/cnr/isti/thematrix/scripting/modules/MatrixFileOutput.html" title="class in it.cnr.isti.thematrix.scripting.modules"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?it/cnr/isti/thematrix/scripting/modules/MatrixFileInput.html" target="_top">Frames</a></li>
<li><a href="MatrixFileInput.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_classes_inherited_from_class_java.util.AbstractMap">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
