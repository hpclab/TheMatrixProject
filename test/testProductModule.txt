DRUGS (ScriptInputModule)
parameters
	scriptFilename = LoadDRUGS.txt
	inputName = DRUGS
	expectedSchema = IADdrug
end
OUTPAT (ScriptInputModule)
parameters
	scriptFilename = LoadOUTPAT.txt
	inputName = OUTPAT
	expectedSchema = IADoutpat
end

FilteredDRUGS (FilterModule)
inputs
	IADdrug = DRUGS
parameters
	conditions = [{ATC matches "C07*"};{ATC matches "C08*"}]	
	boolExpr = OR
end

SortedDRUGS (SortModule)
inputs
	IADdrug = FilteredDRUGS
parameters
	fieldNames = [ PERSON_ID ]
end

FilteredOUTPAT (FilterModule)
inputs
	IADoutpat = OUTPAT
parameters
	conditions = [{PROC_COD="89.41"};{PROC_COD= "89.42"};{PROC_COD= "89.43"};{PROC_COD= "89.44"};{PROC_COD= "89.44.1"};{PROC_COD= "89.44.2"};{PROC_COD= "92.05.1"}]
	boolExpr = OR
end

SortedOUTPAT (SortModule)
inputs
	IADoutpat = FilteredOUTPAT
parameters
	fieldNames = [ PERSON_ID ]
end

PrescriptionExam_Relation (ProductModule)
inputs
	IADoutpat = SortedOUTPAT
	IADdrug   = SortedDRUGS
parameters
	IDfield   = PERSON_ID
	functions = [elapsedTimeInRange(SortedOUTPAT.PROC_START_DATE , SortedDRUGS.DRUG_DISPENSING_DATE , 0, 180) ]
end

